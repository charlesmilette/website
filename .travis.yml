language: node_js
node_js:
  - node

cache:
  directories:
    - node_modules

env:
  global:
    - secure: l32Y7CIedFcrmoqgJaLDkenPX6wDhg8lC87is7cdjZIlfsHAEngTgQJ3+Iodmhfvt2DxENid5bqMhKdpb3VfsYrNqWElaUxVqaDvXnMhNTopJtFSZbJ3m+I2h98E8KDR8jqhG2mom7LqT4VjzHegBnC/mF9zb3CCnZcTvHCp+w8/sEGSel3yFhUeVag/cmojw6WAjhHGl4ZJAWd3+J+QQRm4l3qh39mlKXc5HReyDOCVvOcFoCOetv3kPARAKLvcDdpEE4nPj7u9fQCInsmId5PdOnBjdSXUDnUH+mt+RIZuCpoipOWNohtQEDZSLgAY6PvjxoEEYydQAeGi2kgpy9QVNusqhgs+ekGOaeqDOn7AGRa12ga0ajkzXy8NXmHxe+QLUM1ncx9AMgsb26hNtFNSkcH6ZjmMQT1eqBqO3SpgQpyAezO1f+WJg624l4dQ+djKDKp0DSOrKjFZKUDRAICcxbSfhLae9HIXB9g1G9jEGi8R22T9mN72waJjWQcvt1jDqOxftHbkxQi7tCtag0kyH5Yh1ybMPccODbDlrvv9ZPrcQtDaT/NGfWvHfkwLx1BGI9fh66HpfM4OvgNxt+cM3hRaSy1bcFq1Anb85D3ZIcO9g7j8v5NP7fr9TM9gZSMVh+GW53xRl41Os+PsZkU/UPF2Jqa/ky6szGTUgao=
    - secure: jA9sm8omDO4+mG7lrAXTIH68aH7psEvPjlFSerb3awFAiHaUSec27wIfM3JLUDobVmlQXVGwRqRAw+qxF6/jSC+3Vnr7E6b24ed1AeDI4zvNr66O4WCL+4DBABhJkCiG0WnA0Y+fhTpsV1bcLSMQn+gYnLwMsq3XX7e1kMitdVCXwqA0D8MhPAsmw2GP+oUjFX9vTk+m7BK+S6UWpNETq89YJgKIpbWC/l6iU5n30siE6VdheYftfMwB5BoKyHSc64gkszAaGtV2CTXFEEeBxf0gylIy6xUaisOfKemZTtG/tUrukf+Kkmkfokei0uZIwjef3wyRlsM5cvwL8XcZacBXzrSUDj0C0mOTC1afQtege/6hloEqx+UM46KVUfAIEXdnroFIPCuZ8rQ3avCEuYHFCr5gYffNd2OZpHTPQ2mzbbTSo35Hk9qg6PEwt1MMY7/v2Jm64IEr+HsR9llj5YTsw638UQlTy4jUDLHMy+1SOUYgKkLbG+SqRh4ivugDEjl1CpxUHmaUlFVu+8NuKDdpwVlZq7ot43E2HVNe+u6+p89qNSklEHXZBORXdaxD19IX4ymRRoJMh5VNNOdjAZ0IUW3XC5hk4yLR3jPIf6pZ7hu3iJJcWm9i54x3YRsY/4SpUMPngrBdO6lp+8BVHkRKJ6k+ByckwwCBkO2YI4c=
    - secure: KSi9zGkjLUXUlhjpSu+l2Y88sDlquLXkeqRxaoTuOG5/1Ziu5TPYr9k2nFWZ//sGArmMACaqMQT088E4CJm+vN9YR+76QrjhmFYUAjOE/m9RLTIAJ7CRAL5SV2tJVYFSjwuSF2Z9sgwNmRaXu2nmZLfvfXLtE+ptS8VsN7BIwATBgT43YAgFlOxaqbsiweHuqvViw0snZlDiLO8m1ag+QrmuVuiuTy9flOFOTSzq6zjTTRnk0VUfzYY5RofHPSGTUBsB3FQxYw77/yuYIDAv4GJh3mrs+G7mZTtmDpS/n7Xcj1FtFDiUQeXuLHKU2qxYHamPBZqFRCTc9uZUq1JK+q5eGxBDkS0VNQIIfHiC3Pq+1NICzk6HSin4aEfMRp5WJrpLAskR/4GyUIUVmxBDXnqF9vLoNIk91a8s7NPYSZBKk6y74acBo9jAeY9XnkRp2eF2/6nEqc7bVZzzMEd4c0V0e6OnLxMKuTWaX1DFnNI7Q9ns0IEFnq2/66LwpDXtLxGbf5epyHmXocBA86o88kIMirhi+Kxf0B+lgHXOgHcgMi9uUrrfJzTjXy/nzXE0T7TyYoa6E0uBAP+t5soz5plxm4NFGTGdtgEwH09BXHQ/QjH9tOfM2IDq0A/IvQ7iN5f6xpmjmS4sTK5WxIQbQNqbEmIydIWx2cvplnkaC30=
    - secure: iES4odQ4uu81rKczt+IY6/hjul8wsJ5TF9vhqqnxf/75ftPD3ek3AJRFsYU7J7gwHyCuEe2TXb1eUCLKrL3LTctOdcWD99C0Rc8R4JWeMNY7iRycWq8qjZglFRqZXBWFs+KpvjIefVJtLkWOd3uOkCQj0tLsJ5Ht2EUI93fEuPSJZS4h8RFFx87HVaytURykhxZoxJIxdo/XPbLQN3Q5K9fJnu4cnuMXx4RsDai6tb6EP3fRKH4Xq5mHbJ6eOhFZxdt09BsJFgTZJnihKpbXXFN507SDB5oAWjOUkogGUVcpe82ZD33BmvtDFsAKpupWXx2h6p1pWhSEHW79ibQ1uyobrA4WgMQlVPohl8fr5ePDeuPygz9VIWi3pn5fIQ/RoAj1huPcp/R5/VgS2hVB6DO3mfJ7fUnRY9S8Jn80VO5ujKohETot/33S/ddT+702cAbg+FbK41hJqwWo472qYiYvJ3rfifSu/IYrkRJ4e/uN8plqqfcQmkpQlQbw9EKZzqgIqVbWoBZ9C8uTUJBrZJ2RiU0Z5toOtl/W5/QR86oUUXSapw9bj2mlIdnMRPle9LhReLA3zrQ/1EPTvcHFp7Xdf6ERg85UQYVqxwTJ/OXeUQd99n52ife9l1Xi5rkInqlAnOLV9xUF8CVQcjpyJ9wI9FvSAwhxsNI2+dmNmzQ=

before_install:
  - npm install -g firebase-tools
# https://github.com/travis-ci/travis-ci/issues/8637

script:
  - eclint check *
  - jshint public
  - shellcheck delete-changed-files.sh
  - shellcheck put-secrets.sh
  - ./put-secrets.sh

deploy:
  skip_cleanup: true
  provider: firebase
  token:
    secure: pCCm1hV1bjzYOPZWRMnA5NAPcyu/uq9GnUhR5GwaS49ENcmRqQxhGQza65RvT/3/im9D1pIeqaX0Ed5AlJvL5qYkek2NSCIr8LzDR13pdqaxzeCCFctayT56KoqHyHKrBC719JPqsnGNRQbE4M612R7KNwdanNQuZhis12DkGDpCnSpTcJBzu7YMerQj9pJ89hSm4tSzcU1uzuLMtmwaAuHfz2QUu28J9xUc2UuNQhfw1+fKy4gZBvvKzg/m2f8/2yRzXts3XZVvBYrvwAnIh6ZjfQgk9oeGrHHrZTgtgTF1RNXYNc9gnado97k+xDzrd/tQ5NciQtUI4pbxTftyVxq73DonQwKL0eBkK2+vGbLB7xx6nbP5/KeGN00QiWvxrxLccZ6Fu+yfkdVhqelRqSA8KP499QN1fTslRRqrVp6uk+sxUgFaov9A4eQEvsVtlxsXRP5iOnV2a1XXK1L6axzFHFIpys5LdFr3lyeAlBOAXf4UMX465LK1vamh8lJ/1+ArZTb/ONk7+df5T9RJ6hCMq9AcNCUA3cV0yGG56TJc5tsVM2Jp8hL8/mKJRNxRuy7nbzJ2DVYj+eYiYfGuYxRnSOzXZBGy94pVZQPIglHIYAni+VV91mfDyRXVRownMkpG5irgoxAxPP60PYuSDi9s4IO41XFLtXpwHdTGHVk=
  project:
    secure: E5pODGlDdzqZifLfh9yCv5VF3SNpq18TfalnghElMNZpuHPt/UzUMTWXx24q5qD9fgM41OHNQO6KUtFgvOVNB3KIcvnrgIGolTGSZzHaOAkHtRXmEK5QlPC8WTKFYI+9GzA8+d3dpww3yQL/qwGy5ViSfA0s5mVXpn+xXlLa7pUuijI1Xxh/OZIOmtAIAalKUXXZc2C4WOG2AbuRiFPkyOTbuy21CDL2uU27XMRcfzZyx4w7nzKz3X2/mhK4UdAOub7Foyx6NnfNsyT6C/z6++hGNCQVnL/xFlpsM8Ysg6W1leXszGby+vSkk0cPgevNVS1dGBtQB0kJXKNkM5rViE6jZCbi00UHEGCbj6HX0UjHQ4ppgbhglqhoLB/9BGuEg1R6H0mDugMZwsGhMn7bAZv784nNp5IQwiCjXLlOBPSJOSe6lJ1DwjLvl/RgY5O1bZGqNiYt8wXKOVt1gHDsnwkf2b0/oIebQkgAq0f9Ad1C0b0H7dcAHAk30FqZsKUnn+5yg8iZbwQadhzXoEI2aa9fdkjgov/hvjQQfmfYOTA4p4QgKr3LS2lyTD6Cl8VGQGzHWFgNIWduvF1dyRD33grQZ659kJuklhsIs82AdYtQRrmG0ljMUyJ9eEUMqfDLQ5mzmdGs0hnvLXwTnAl75fpyXgwaA5sjO1fsAB3fZ0M=
  message: Travis CI deployment

after_deploy:
  - ./delete-changed-files.sh